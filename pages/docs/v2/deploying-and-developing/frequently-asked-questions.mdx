import { withAmp } from 'next/amp'
import Doc from '~/components/layout/docs'
import { TerminalInput } from '~/components/text/terminal'
import { GenericLink } from '~/components/text/link'
import { InlineCode } from '~/components/text/code'
import { Image } from '~/components/media'
import Caption from '~/components/text/caption'
import Card from '~/components/card'

export const meta = {
  title: 'Frequently Asked Questions',
  description: 'Get answers to popular Now Development questions.',
  editUrl:
    'pages/docs/v2/deploying-and-developing/frequently-asked-questions.mdx',
  lastEdited: '2019-07-17T20:31:59.000Z'
}

This is a list of frequently asked questions related to local development with Now.

All of the questions feature full answers and many contain links to other resources you may find helpful.

Questions can be found under their relevant section header.

### Now + Next.js

##### Why use `now dev` when developing a Next.js app? Why not just run `next dev`?

When you are developing a Next.js application for Now 2.0, the main objective with `now dev` is to imitate our cloud environment.

With that in mind, a few additional steps are necessary before your application can be served in a [Serverless](/docs/v2/deployments/concepts/lambdas/) environment, `now dev` is a **single command development experience** that takes care of this for you.

### Upgrading

##### How do I upgrade to `now dev`?

Get started by [downloading Now CLI](/docs/v2/getting-started/installation/#now-cli) or [upgrade your existing installation](/guides/updating-now-cli/) to use `now dev`.

We always recommend running the latest version of Now CLI. This lets you take advantage of the newest features, stability and security enhancements. To download Now CLI, visit our [download page](/download). To upgrade the Now CLI, [follow the instructions](/guides/updating-now-cli/) in the Upgrade section.

##### I've used Now 1.0 in the past, how do I start using `now dev`?

We encourage you to [upgrade to Now 2.0](/guides/upgrade-to-2-0) in order to take advantage of `now dev`. Upgrading also allows you to enjoy new features, better performance and security, and lower pricing.

You can start using `now dev` by upgrading to the latest Now CLI. After that, we recommend taking a look at our [examples](https://github.com/zeit/now-examples), this will help you understand the changes you need to make, **if any**, in order to fit a serverless model.

### Environment Variables and Secrets

##### Why am I seeing an [environment variables](/docs/v2/development/environment-variables) are not defined in `.env` error when using secrets?

`now dev` does not currently support the use of secrets defined in the [Now CLI](/docs/v2/getting-started/installation/#now-cli). To use [environment variables](/docs/v2/development/environment-variables) with `now dev`, create a `.env` file and add them there as suggested in our [documentation](/docs/v2/development/environment-variables).

##### Why I can’t use `.env` or `.env.build` when deploying?

Your application's security is of paramount importance to us. An unencrypted `.env` file exposes you to a security risk — therefore we do not allow it. Use the [secrets](/docs/v2/deployments/environment-variables-and-secrets/) feature to protect your information by storing your variables safely in the cloud.

##### How do I detect local development or cloud deployment?

Sometimes you need to execute a different code path when your application is running locally compared to when it is running remotely in the cloud. All deployments expose a `NOW_REGION` environment variable which is assigned to the [region](/docs/v2/platform/regions-and-providers) where the [Lambda](/docs/v2/deployments/concepts/lambdas) is currently executing. This value is `dev1` for local development.

### Types of Projects

##### Does `now dev` work for all types of projects?

Yes! `now dev` works for all types of projects and supports the use of any backend language. You can find many examples in our [examples repository](https://github.com/zeit/now-examples).

### Developing Offline

##### Why doesn’t `now dev` work offline for me?

`now dev` needs to be able to download your project's dependencies before it can continue. If you aren't able to use `now dev` offline, most likely your dependencies haven't been downloaded yet — getting online and running `now dev` again should fix it.

### Getting Help

##### Something isn’t right with `now dev` – who do I reach out to?

Firstly, make sure your Now CLI is up-to-date. If upgrading doesn't fix it for you, you're welcome to ask in our [community chat for help](https://zeit.co/chat), or you can create a new issue in the [now-cli repository](https://github.com/zeit/now-cli).

Someone from the ZEIT team or an experienced member of the community will assist you. For dedicated support learn more about how to [extend your ZEIT experience](https://zeit.co/blog/add-ons) and view our [plan add-ons](https://zeit.co/pricing#addons).

## Read More

Extend your projects with all that Now offers:

<Card title="Deployment" href="/docs/v2/deployments/basics">
  Learn how to deploy your projects with Now.
</Card>

<Card title="Aliases" href="/docs/v2/domains-and-aliases/aliasing-a-deployment">
  Discover how to generate shareable URL's for your project.
</Card>

<Card title="Support" href="/support">
  Learn more about our Priority Support and setup a Custom Domain Suffix.
</Card>

export default withAmp(({ children }) => <Doc meta={meta}>{children}</Doc>, {
  hybrid: true
})
