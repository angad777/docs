import { withAmp } from 'next/amp'
import Doc from '~/components/layout/docs'
import Caption from '~/components/text/caption'
import { InlineCode } from '~/components/text/code'
import Card from '~/components/card'
import Note from '~/components/text/note'
import { P } from '~/components/text/paragraph'
import { GenericLink } from '~/components/text/link'

export const meta = {
  title: 'Ignoring Source Paths',
  description:
    'Using a .nowignore file to prevent deploying source paths for speed and security.',
  editUrl: 'pages/docs/v2/deployments/ignoring-source-paths.mdx',
  lastEdited: '2019-07-17T12:53:43.000Z'
}

We highly recommend including the `.nowignore` file in your Now deployment. It is essential in uploading only the required paths to Now, increasing the speed of the initial deployment process.

In this document, you will learn the file's exact function and how to use it.

## What Files Are Uploaded

By default, all files within your project are uploaded (not served, just uploaded) to Now.

In order to prevent a path within your project from being uploaded to Now, you need to create a `.nowignore` file and add the path that you would like to ignore.

The syntax of a `.nowignore` file is exactly the same as a `.gitignore` file (you can find the full specification [here](https://git-scm.com/docs/gitignore#_pattern_format)). As an example, this is how `.nowignore` would look if you wanted to prevent the directories `output` and `dist` from being uploaded:

```
output
dist
```

<Caption>
  An example <InlineCode>.nowignore</InlineCode>file, preventing the{' '}
  <InlineCode>/output</InlineCode> and <InlineCode>/dist</InlineCode>{' '}
  directories from being uploaded.
</Caption>

We highly recommend taking advantage of this system for ignoring paths, as it will make creating deployments both faster and cheaper.

<Note>
  If you would like to check exactly which files are uploaded, you can do so
  from the <P.B>Source</P.B> tab on the deployment dashboard.
</Note>

## What Files Are Served

If [Now](/now) is required to build your project, the non-targeted files are prevented from being deployed and served on Now.

Therefore, only build output files are served by now, removing unnecessary overhead for your project.

## Ignored by Default

By default, Now ignores certain files and directories that are common to the **development process**.

In addition to this, Now also ignores `.env` and `.env.build` files as a security measure, preventing the upload of project secrets by mistake.

The full list of files and directories ignored by default can be found below:

```
.hg
git
.gitmodules
.svn
.cache
.next
.now
.npmignore
.dockerignore
.gitignore
.\*.swp
.DS_Store
.wafpicke-\*
.lock-wscript
.env
.env.build
.venv
npm-debug.log
config.gypi
node_modules
**pycache**/
venv/
CVS
```

<Caption>
  The full list of files ignored by <GenericLink href="/now">Now</GenericLink>{' '}
  by default when uploading a project.
</Caption>

## Read More

See the documentation on **Deployment Basics** to learn more:

<Card title="Deployment Basics" href="/docs/v2/deployments/basics">
  Deploy any of your applications with ZEIT Now.
</Card>

export default withAmp(({ children }) => <Doc meta={meta}>{children}</Doc>, {
  hybrid: true
})
